# å•†å“è¯¦æƒ…é¡µæ‹¼å›¢æ¥å£å®ç°å®ŒæˆæŠ¥å‘Š

**æ—¥æœŸ**: 2025-11-01  
**ç‰ˆæœ¬**: v1.0  
**ä»»åŠ¡**: å®ç°å•†å“è¯¦æƒ…é¡µæ‹¼å›¢æ¥å£  

---

## ğŸ“‹ ä»»åŠ¡æ¦‚è¿°

æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œä¼˜åŒ–ç”¨æˆ·ç«¯æ‹¼å›¢é€»è¾‘ï¼Œåœ¨å•†å“è¯¦æƒ…é¡µå±•ç¤ºå½“å‰å•†å“çš„æ‰€æœ‰æ‹¼å›¢æ´»åŠ¨åŠè¿›è¡Œä¸­çš„å›¢é˜Ÿï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥å‚ä¸æ‹¼å›¢ã€‚

---

## âœ… å®Œæˆå†…å®¹

### 1. åç«¯æ¥å£å®ç°

#### 1.1 æ–°å¢DTO

**æ–‡ä»¶**: `GroupBuyService/src/main/java/com/bcu/edu/dto/response/ActivityWithTeamsResponse.java`

**åŠŸèƒ½**: 
- å®šä¹‰æ´»åŠ¨åŠå…¶å›¢é˜Ÿåˆ—è¡¨çš„å“åº”ç»“æ„
- åŒ…å«æ´»åŠ¨åŸºæœ¬ä¿¡æ¯å’Œå›¢é˜Ÿç®€åŒ–ä¿¡æ¯
- æ”¯æŒåµŒå¥—çš„TeamInfoå†…éƒ¨ç±»

**å…³é”®å­—æ®µ**:
```java
public class ActivityWithTeamsResponse {
    private Long activityId;
    private Long productId;
    private BigDecimal groupPrice;
    private Integer requiredNum;
    private Integer maxNum;
    private LocalDateTime startTime;
    private LocalDateTime endTime;
    private Integer status;
    private List<TeamInfo> teams;  // å›¢é˜Ÿåˆ—è¡¨
    
    public static class TeamInfo {
        private Long teamId;
        private String teamNo;
        private Long leaderId;
        private String leaderName;
        private Long communityId;
        private String communityName;
        private Integer requiredNum;
        private Integer currentNum;
        private Integer teamStatus;
        private LocalDateTime expireTime;
        private LocalDateTime createTime;
    }
}
```

#### 1.2 æ–°å¢Controlleræ¥å£

**æ–‡ä»¶**: `GroupBuyService/src/main/java/com/bcu/edu/controller/ActivityController.java`

**æ¥å£è·¯å¾„**: `GET /api/groupbuy/product/{productId}/activities`

**æƒé™**: æ— éœ€è®¤è¯ï¼ˆç™½åå•æ¥å£ï¼‰

**å‚æ•°**:
- `productId` (è·¯å¾„å‚æ•°): å•†å“ID
- `communityId` (æŸ¥è¯¢å‚æ•°ï¼Œå¯é€‰): ç”¨æˆ·ç¤¾åŒºIDï¼Œç”¨äºç¤¾åŒºä¼˜å…ˆæ’åº

**åŠŸèƒ½**:
- æŸ¥è¯¢æŒ‡å®šå•†å“çš„æ‰€æœ‰è¿›è¡Œä¸­æ‹¼å›¢æ´»åŠ¨
- æ¯ä¸ªæ´»åŠ¨è¿”å›æœ€å¤š10ä¸ªè¿›è¡Œä¸­çš„å›¢
- æ”¯æŒç¤¾åŒºä¼˜å…ˆæ’åº
- åŒ…å«å›¢é•¿å§“åã€ç¤¾åŒºåç§°ç­‰è¯¦ç»†ä¿¡æ¯

#### 1.3 ä¸šåŠ¡é€»è¾‘å®ç°

**æ–‡ä»¶**: `GroupBuyService/src/main/java/com/bcu/edu/service/GroupBuyService.java`

**æ–°å¢æ–¹æ³•**:

1. **getProductActivitiesWithTeams(Long productId, Long communityId)**
   - æ ¹æ®å•†å“IDæŸ¥è¯¢æ‰€æœ‰è¿›è¡Œä¸­çš„æ‹¼å›¢æ´»åŠ¨
   - è¿‡æ»¤æ¡ä»¶ï¼šstatus=1 ä¸”åœ¨æ—¶é—´èŒƒå›´å†…
   - ä¸ºæ¯ä¸ªæ´»åŠ¨æ„å»ºå›¢é˜Ÿåˆ—è¡¨

2. **buildActivityWithTeams(GroupBuy activity, Long communityId)**
   - æ„å»ºåŒ…å«å›¢åˆ—è¡¨çš„æ´»åŠ¨å“åº”
   - è°ƒç”¨RepositoryæŸ¥è¯¢è¿›è¡Œä¸­çš„å›¢ï¼ˆç¤¾åŒºä¼˜å…ˆï¼Œæœ€å¤š10ä¸ªï¼‰
   - ä¸ºæ¯ä¸ªå›¢æ„å»ºè¯¦ç»†ä¿¡æ¯

3. **buildTeamInfo(GroupBuyTeam team)**
   - æ„å»ºå›¢ä¿¡æ¯
   - Feignè°ƒç”¨UserServiceè·å–å›¢é•¿å§“å
   - Feignè°ƒç”¨LeaderServiceè·å–ç¤¾åŒºåç§°
   - å¼‚å¸¸å®¹é”™å¤„ç†

**æŠ€æœ¯ç‰¹æ€§**:
- âœ… ä½¿ç”¨TeamRepositoryçš„ç¤¾åŒºä¼˜å…ˆæ’åºæŸ¥è¯¢
- âœ… Feignå®¢æˆ·ç«¯è·¨æœåŠ¡è°ƒç”¨
- âœ… å¼‚å¸¸å®¹é”™ï¼ˆè·å–å›¢é•¿/ç¤¾åŒºä¿¡æ¯å¤±è´¥ä¸å½±å“ä¸»æµç¨‹ï¼‰
- âœ… Stream APIä¼˜é›…å¤„ç†æ•°æ®è½¬æ¢
- âœ… æ”¯æŒæœªç™»å½•ç”¨æˆ·è®¿é—®

---

### 2. å‰ç«¯é›†æˆ

#### 2.1 APIè°ƒç”¨å‡½æ•°

**æ–‡ä»¶**: `community-group-buy-frontend/src/api/groupbuy.js`

**æ–°å¢å‡½æ•°**: `getProductGroupBuyActivities(productId, params)`

```javascript
/**
 * æ ¹æ®å•†å“IDè·å–æ‹¼å›¢æ´»åŠ¨ï¼ˆåŒ…å«å›¢åˆ—è¡¨ï¼‰â­å•†å“è¯¦æƒ…é¡µä¸“ç”¨
 * @param {number} productId - å•†å“ID
 * @param {object} params - æŸ¥è¯¢å‚æ•°
 * @param {number} params.communityId - ç”¨æˆ·ç¤¾åŒºIDï¼ˆå¯é€‰ï¼‰
 * @returns {Promise<Array>} æ´»åŠ¨åˆ—è¡¨
 */
export const getProductGroupBuyActivities = (productId, params) => {
  return request({
    url: `/api/groupbuy/product/${productId}/activities`,
    method: 'GET',
    params
  })
}
```

#### 2.2 å•†å“è¯¦æƒ…é¡µæ›´æ–°

**æ–‡ä»¶**: `community-group-buy-frontend/src/views/product/ProductDetailView.vue`

**æ–°å¢åŠŸèƒ½**:

1. **æ‹¼å›¢ä¸“åŒºUI**
   - ç‹¬ç«‹çš„æ‹¼å›¢åŒºåŸŸè®¾è®¡
   - æ¸å˜èƒŒæ™¯ + è™šçº¿è¾¹æ¡†
   - æ´»åŠ¨å¡ç‰‡å±•ç¤º
   - éª¨æ¶å±åŠ è½½æ•ˆæœ

2. **æ´»åŠ¨ä¿¡æ¯å±•ç¤º**
   - æ‹¼å›¢ä»·ã€æˆå›¢äººæ•°ã€æ´»åŠ¨æ—¶é—´
   - æ ‡ç­¾é«˜äº®æ˜¾ç¤º
   - å›¾æ ‡å¢å¼ºè§†è§‰æ•ˆæœ

3. **å›¢é˜Ÿåˆ—è¡¨å±•ç¤º**
   - æœ€å¤šæ˜¾ç¤º3ä¸ªå›¢ï¼ˆæœ‰æŸ¥çœ‹å…¨éƒ¨æŒ‰é’®ï¼‰
   - å›¢å·ã€å›¢é•¿ã€ç¤¾åŒºä¿¡æ¯
   - è¿›åº¦æ¡æ˜¾ç¤ºæ‹¼å›¢è¿›åº¦
   - æœ¬ç¤¾åŒºæ ‡ç­¾é«˜äº®
   - è¿‡æœŸæ—¶é—´å€’è®¡æ—¶

4. **äº¤äº’åŠŸèƒ½**
   - "ç«‹å³å‚å›¢"æŒ‰é’® â†’ è·³è½¬å›¢è¯¦æƒ…é¡µ
   - "æŸ¥çœ‹å…¨éƒ¨"æŒ‰é’® â†’ è·³è½¬æ´»åŠ¨å›¢åˆ—è¡¨é¡µ
   - æœªç™»å½•ç”¨æˆ·å¯æµè§ˆï¼Œç‚¹å‡»å‚å›¢å¼•å¯¼ç™»å½•

5. **è¾…åŠ©å‡½æ•°**
   - `formatActivityTime()`: æ ¼å¼åŒ–æ´»åŠ¨æ—¶é—´
   - `getExpireTime()`: è®¡ç®—å‰©ä½™æ—¶é—´
   - `getProgressColor()`: åŠ¨æ€è¿›åº¦æ¡é¢œè‰²

**æ ·å¼ç‰¹ç‚¹**:
- å“åº”å¼è®¾è®¡
- Hoveræ•ˆæœ
- æ¸å˜èƒŒæ™¯
- åŠ¨æ€é¢œè‰²
- å¡ç‰‡é˜´å½±
- å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»

---

### 3. APIæ–‡æ¡£æ›´æ–°

**æ–‡ä»¶**: `docs/ç¤¾åŒºå›¢è´­ç³»ç»Ÿ/äºŒçº§æ–‡æ¡£ï¼ˆå‚è€ƒï¼‰/API_GroupBuyService.md`

**æ›´æ–°å†…å®¹**:

1. **ç‰ˆæœ¬å·å‡çº§**: v1.0.0 â†’ v1.0.1

2. **æ¥å£ç»Ÿè®¡æ›´æ–°**:
   - æ€»æ¥å£æ•°ï¼š12ä¸ª â†’ 13ä¸ª
   - æ‹¼å›¢æ´»åŠ¨ç®¡ç†æ¥å£ï¼š5ä¸ª â†’ 6ä¸ª

3. **ç™½åå•æ¥å£**:
   - æ–°å¢ `GET /api/groupbuy/product/{productId}/activities`

4. **æ–°å¢ç« èŠ‚**: 7.3 æ ¹æ®å•†å“IDè·å–æ‹¼å›¢æ´»åŠ¨
   - å®Œæ•´çš„æ¥å£è¯´æ˜
   - è¯·æ±‚/å“åº”ç¤ºä¾‹
   - å­—æ®µè¯´æ˜
   - ä¸šåŠ¡è§„åˆ™
   - ä½¿ç”¨åœºæ™¯

5. **ç‰ˆæœ¬å†å²**:
   - è®°å½•v1.0.1çš„æ–°åŠŸèƒ½å’Œä¼˜åŒ–æ”¹è¿›

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. ç¤¾åŒºä¼˜å…ˆæ¨è

**å®ç°æ–¹å¼**: SQL ORDER BY CASE

```sql
SELECT * FROM group_buy_team t
WHERE t.activity_id = :activityId
  AND t.team_status = 0
  AND t.expire_time > NOW()
ORDER BY 
  CASE WHEN t.community_id = :communityId THEN 0 ELSE 1 END ASC,
  t.create_time DESC
LIMIT 10
```

**æ•ˆæœ**: 
- æœ¬ç¤¾åŒºçš„å›¢ä¼˜å…ˆæ˜¾ç¤º
- æå‡ç¤¾åŒºå†…æ‹¼å›¢æˆåŠŸç‡
- é™ä½é…é€æˆæœ¬

### 2. è·¨æœåŠ¡ä¿¡æ¯èšåˆ

**æœåŠ¡è°ƒç”¨é“¾**:
```
GroupBuyService
  â”œâ”€> UserService (è·å–å›¢é•¿å§“å)
  â””â”€> LeaderService (è·å–ç¤¾åŒºåç§°)
```

**å®¹é”™æœºåˆ¶**:
- è·å–å›¢é•¿ä¿¡æ¯å¤±è´¥ â†’ æ˜¾ç¤º"æœªçŸ¥å›¢é•¿"
- è·å–ç¤¾åŒºä¿¡æ¯å¤±è´¥ â†’ communityNameä¸ºnull
- ä¸å½±å“ä¸»æµç¨‹ï¼Œé™é»˜å¤„ç†

### 3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–

**æ— éœ€ç™»å½•**:
- æœªç™»å½•ç”¨æˆ·å¯æµè§ˆæ‹¼å›¢ä¿¡æ¯
- ç‚¹å‡»å‚å›¢æ—¶å¼•å¯¼ç™»å½•
- é™ä½ç”¨æˆ·æµå¤±ç‡

**ä¿¡æ¯å®Œæ•´**:
- æ´»åŠ¨ä¿¡æ¯ + å›¢é˜Ÿåˆ—è¡¨ä¸€æ¬¡æ€§è·å–
- å‡å°‘é¡µé¢è·³è½¬
- æå‡å†³ç­–æ•ˆç‡

**è§†è§‰å¼•å¯¼**:
- æœ¬ç¤¾åŒºå›¢é˜Ÿæ ‡ç­¾é«˜äº®
- è¿›åº¦æ¡åŠ¨æ€é¢œè‰²
- è¿‡æœŸæ—¶é—´å€’è®¡æ—¶
- æ‹¼å›¢æ°›å›´è¥é€ 

---

## ğŸ“Š æ•°æ®æµå‘

```
ç”¨æˆ·è®¿é—®å•†å“è¯¦æƒ…é¡µ
    â†“
å‰ç«¯è°ƒç”¨ getProductGroupBuyActivities(productId, communityId)
    â†“
Gatewayè·¯ç”±åˆ° GroupBuyService
    â†“
GroupBuyService.getProductActivitiesWithTeams()
    â”œâ”€> æŸ¥è¯¢å•†å“çš„æ‰€æœ‰è¿›è¡Œä¸­æ´»åŠ¨
    â”œâ”€> ä¸ºæ¯ä¸ªæ´»åŠ¨æŸ¥è¯¢å›¢åˆ—è¡¨ï¼ˆç¤¾åŒºä¼˜å…ˆï¼Œæœ€å¤š10ä¸ªï¼‰
    â”œâ”€> Feignè°ƒç”¨UserServiceè·å–å›¢é•¿å§“å
    â”œâ”€> Feignè°ƒç”¨LeaderServiceè·å–ç¤¾åŒºåç§°
    â””â”€> è¿”å›å®Œæ•´çš„æ´»åŠ¨+å›¢é˜Ÿåˆ—è¡¨
    â†“
å‰ç«¯æ¸²æŸ“æ‹¼å›¢ä¸“åŒº
    â”œâ”€> æ´»åŠ¨å¡ç‰‡
    â”œâ”€> å›¢é˜Ÿåˆ—è¡¨ï¼ˆæœ€å¤š3ä¸ªï¼‰
    â”œâ”€> ç«‹å³å‚å›¢æŒ‰é’®
    â””â”€> æŸ¥çœ‹å…¨éƒ¨æŒ‰é’®
```

---

## ğŸ”§ æŠ€æœ¯äº®ç‚¹

### 1. å“åº”å¼æ•°æ®ç»“æ„

**åµŒå¥—DTOè®¾è®¡**:
```java
ActivityWithTeamsResponse
  â”œâ”€ activityId, productId, groupPrice...
  â””â”€ teams: List<TeamInfo>
       â”œâ”€ teamId, teamNo, leaderId...
       â””â”€ leaderName, communityName (Feignèšåˆ)
```

### 2. æŸ¥è¯¢ä¼˜åŒ–

**ç¤¾åŒºä¼˜å…ˆæ’åº**:
- ä½¿ç”¨åŸç”ŸSQLçš„CASE WHENå®ç°
- å•æ¬¡æŸ¥è¯¢è¿”å›æœ‰åºç»“æœ
- é¿å…åº”ç”¨å±‚äºŒæ¬¡æ’åº

**é™åˆ¶è¿”å›æ•°é‡**:
- æ¯ä¸ªæ´»åŠ¨æœ€å¤š10ä¸ªå›¢
- å‡å°‘ç½‘ç»œä¼ è¾“
- æå‡å“åº”é€Ÿåº¦

### 3. å¼‚å¸¸å®¹é”™

**é™é»˜å¤±è´¥ç­–ç•¥**:
```java
try {
    Result<UserInfoDTO> userResult = userServiceClient.getUserInfo(leaderId);
    leaderName = userResult.getData().getRealName();
} catch (Exception e) {
    log.warn("è·å–å›¢é•¿{}ä¿¡æ¯å¤±è´¥: {}", leaderId, e.getMessage());
    leaderName = "æœªçŸ¥å›¢é•¿";  // é™çº§å¤„ç†
}
```

**å¥½å¤„**:
- ä¸å› ä¾èµ–æœåŠ¡æ•…éšœè€Œæ•´ä½“å¤±è´¥
- ä¿è¯æ ¸å¿ƒåŠŸèƒ½å¯ç”¨
- æå‡ç³»ç»Ÿå¯ç”¨æ€§

---

## ğŸ§ª æµ‹è¯•å»ºè®®

### 1. å•å…ƒæµ‹è¯•

**æµ‹è¯•ç‚¹**:
- `getProductActivitiesWithTeams()` æ­£å¸¸åœºæ™¯
- å•†å“æ— æ‹¼å›¢æ´»åŠ¨åœºæ™¯
- æ´»åŠ¨æ— è¿›è¡Œä¸­çš„å›¢åœºæ™¯
- ç¤¾åŒºä¼˜å…ˆæ’åºéªŒè¯
- Feignè°ƒç”¨å¤±è´¥å®¹é”™

### 2. é›†æˆæµ‹è¯•

**æµ‹è¯•æµç¨‹**:
1. åˆ›å»ºæ‹¼å›¢æ´»åŠ¨ï¼ˆå•†å“ID=1ï¼‰
2. å›¢é•¿å‘èµ·å¤šä¸ªå›¢ï¼ˆä¸åŒç¤¾åŒºï¼‰
3. è°ƒç”¨æ–°æ¥å£æŸ¥è¯¢
4. éªŒè¯ç¤¾åŒºä¼˜å…ˆæ’åº
5. éªŒè¯å›¢é•¿å§“åã€ç¤¾åŒºåç§°æ­£ç¡®

### 3. å‰ç«¯æµ‹è¯•

**æµ‹è¯•ç‚¹**:
- æœ‰æ‹¼å›¢æ´»åŠ¨çš„å•†å“
- æ— æ‹¼å›¢æ´»åŠ¨çš„å•†å“
- æ´»åŠ¨æœ‰å›¢ vs æ´»åŠ¨æ— å›¢
- æœ¬ç¤¾åŒºå›¢é«˜äº®æ˜¾ç¤º
- ç™»å½• vs æœªç™»å½•äº¤äº’
- éª¨æ¶å±åŠ è½½æ•ˆæœ
- å“åº”å¼å¸ƒå±€é€‚é…

---

## ğŸ“ æ–‡ä»¶æ¸…å•

### åç«¯æ–‡ä»¶ (3ä¸ª)

1. `GroupBuyService/src/main/java/com/bcu/edu/dto/response/ActivityWithTeamsResponse.java` (æ–°å¢)
2. `GroupBuyService/src/main/java/com/bcu/edu/controller/ActivityController.java` (ä¿®æ”¹)
3. `GroupBuyService/src/main/java/com/bcu/edu/service/GroupBuyService.java` (ä¿®æ”¹)

### å‰ç«¯æ–‡ä»¶ (2ä¸ª)

1. `community-group-buy-frontend/src/api/groupbuy.js` (ä¿®æ”¹)
2. `community-group-buy-frontend/src/views/product/ProductDetailView.vue` (ä¿®æ”¹)

### æ–‡æ¡£æ–‡ä»¶ (2ä¸ª)

1. `docs/ç¤¾åŒºå›¢è´­ç³»ç»Ÿ/äºŒçº§æ–‡æ¡£ï¼ˆå‚è€ƒï¼‰/API_GroupBuyService.md` (ä¿®æ”¹)
2. `docs/ç¤¾åŒºå›¢è´­ç³»ç»Ÿ/å•†å“è¯¦æƒ…é¡µæ‹¼å›¢æ¥å£å®ç°å®ŒæˆæŠ¥å‘Š.md` (æ–°å¢)

**æ€»è®¡**: 7ä¸ªæ–‡ä»¶

---

## ğŸš€ éƒ¨ç½²è¯´æ˜

### 1. åç«¯éƒ¨ç½²

**é‡å¯GroupBuyService**:
```bash
cd E:\E\BYSJ\community-group-buy-backend\GroupBuyService
mvn spring-boot:run
```

**éªŒè¯æ¥å£**:
```bash
curl http://localhost:8063/api/groupbuy/product/1/activities?communityId=1
```

### 2. å‰ç«¯éƒ¨ç½²

**æ— éœ€é‡å¯**:
- Viteçƒ­æ›´æ–°è‡ªåŠ¨ç”Ÿæ•ˆ
- åˆ·æ–°å•†å“è¯¦æƒ…é¡µå³å¯çœ‹åˆ°æ–°UI

**éªŒè¯åŠŸèƒ½**:
1. è®¿é—®å•†å“è¯¦æƒ…é¡µ
2. æŸ¥çœ‹æ˜¯å¦æ˜¾ç¤º"æ‹¼å›¢ä¸“åŒº"
3. ç‚¹å‡»"ç«‹å³å‚å›¢"æŒ‰é’®
4. ç‚¹å‡»"æŸ¥çœ‹å…¨éƒ¨"æŒ‰é’®

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®ä¾èµ–

**å¿…é¡»å­˜åœ¨çš„æ•°æ®**:
- å•†å“æ•°æ®ï¼ˆProductServiceï¼‰
- æ‹¼å›¢æ´»åŠ¨ï¼ˆstatus=1ï¼Œåœ¨æ—¶é—´èŒƒå›´å†…ï¼‰
- è¿›è¡Œä¸­çš„å›¢ï¼ˆteam_status=0ï¼Œæœªè¿‡æœŸï¼‰
- ç”¨æˆ·æ•°æ®ï¼ˆUserServiceï¼Œå›¢é•¿ä¿¡æ¯ï¼‰
- ç¤¾åŒºæ•°æ®ï¼ˆLeaderServiceï¼‰

### 2. æœåŠ¡ä¾èµ–

**å¿…é¡»è¿è¡Œçš„æœåŠ¡**:
- Gateway (9000)
- GroupBuyService (8063)
- UserService (8081) - è·å–å›¢é•¿å§“å
- LeaderService (8082) - è·å–ç¤¾åŒºåç§°
- ProductService (8061) - å•†å“ä¿¡æ¯ï¼ˆå¯é€‰ï¼Œä¸å½±å“æ‹¼å›¢é€»è¾‘ï¼‰

### 3. æ€§èƒ½è€ƒè™‘

**Feignè°ƒç”¨ä¼˜åŒ–**:
- å½“å‰å®ç°ï¼šæ¯ä¸ªå›¢éƒ½è°ƒç”¨2æ¬¡Feignï¼ˆå›¢é•¿+ç¤¾åŒºï¼‰
- ä¼˜åŒ–å»ºè®®ï¼šæ‰¹é‡æŸ¥è¯¢æˆ–ç¼“å­˜å¸¸ç”¨æ•°æ®
- å½±å“è¯„ä¼°ï¼šå•å•†å“é€šå¸¸ä¸è¶…è¿‡10ä¸ªå›¢ï¼Œæ€§èƒ½å¯æ¥å—

---

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ä»»åŠ¡æˆåŠŸå®ç°äº†å•†å“è¯¦æƒ…é¡µçš„æ‹¼å›¢åŠŸèƒ½é›†æˆï¼Œå®Œæˆäº†ä»åç«¯æ¥å£åˆ°å‰ç«¯å±•ç¤ºçš„å®Œæ•´é—­ç¯ã€‚

**æ ¸å¿ƒä»·å€¼**:
1. **ç”¨æˆ·ä½“éªŒæå‡**: ä¸€ç«™å¼æµè§ˆå’Œå‚ä¸æ‹¼å›¢ï¼Œå‡å°‘è·³è½¬
2. **ç¤¾åŒºä¼˜å…ˆæ¨è**: æå‡æœ¬ç¤¾åŒºæ‹¼å›¢æˆåŠŸç‡
3. **ä¿¡æ¯èšåˆ**: æ´»åŠ¨+å›¢é˜Ÿ+å›¢é•¿+ç¤¾åŒºä¿¡æ¯ä¸€æ¬¡æ€§è·å–
4. **æ— éœ€ç™»å½•æµè§ˆ**: é™ä½ç”¨æˆ·æµå¤±ç‡

**æŠ€æœ¯äº®ç‚¹**:
1. SQL ORDER BY CASEå®ç°ç¤¾åŒºä¼˜å…ˆ
2. Feignè·¨æœåŠ¡ä¿¡æ¯èšåˆ
3. å¼‚å¸¸å®¹é”™ä¿è¯å¯ç”¨æ€§
4. å“åº”å¼è®¾è®¡å’ŒåŠ¨æ€äº¤äº’

**ä¸‹ä¸€æ­¥å»ºè®®**:
1. æ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
2. æ€§èƒ½ä¼˜åŒ–ï¼ˆæ‰¹é‡æŸ¥è¯¢ã€ç¼“å­˜ï¼‰
3. ç›‘æ§æŒ‡æ ‡ï¼ˆæ¥å£è€—æ—¶ã€Feignè°ƒç”¨æˆåŠŸç‡ï¼‰
4. ç”¨æˆ·è¡Œä¸ºåŸ‹ç‚¹ï¼ˆæ‹¼å›¢è½¬åŒ–ç‡ï¼‰

---

**æŠ¥å‘ŠçŠ¶æ€**: âœ… å®Œæˆ  
**æœ€åæ›´æ–°**: 2025-11-01 18:30  
**ç‰ˆæœ¬**: v1.0

